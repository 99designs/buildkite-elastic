#!/usr/bin/env bash

# Prepends --compatibility flag to arguments to docker-compose if not present

set -Eeuo pipefail

has_compatibility_flag=false

for arg in "$@"; do
  if [[ $arg == "--compatibility" ]]; then
    has_compatibility_flag=true
    break
  fi
done

if ! $has_compatibility_flag; then
  set -- "--compatibility" "$@"
fi

exec /usr/bin/docker-compose "$@"
